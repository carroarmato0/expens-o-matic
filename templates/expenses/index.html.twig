{% extends 'base.html.twig' %}

{% block stylesheets %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.css">
{% endblock %}

{% block javascripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js" crossorigin="anonymous"></script>
<script>
$('#dateInput').datepicker({
});
</script>
{% endblock %}

{% block body %}
<div class="row">
  <div class="col-xl-4 jumbotron p-4">
    <form>
      <fieldset>
        <legend>New expense</legend>
        <div class="form-group">
          <label for="nameTextarea">Name</label>
          <textarea class="form-control" id="nameTextarea" rows="1"></textarea>
        </div>
        <div class="form-group">
          <label for="descriptionTextarea">Description</label>
          <textarea class="form-control" id="descriptionTextarea" rows="1"></textarea>
        </div>
        <div class="form-group">
          <label for="valueInput">Amount</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text">â‚¬</span>
            </div>
            <input type="text" class="form-control" id="valueInput" aria-label="Amount (to the nearest euro)">
          </div>
        </div>
        <div class="form-group">
          <label for="dateInput">Date</label>
          <input type="text" class="form-control datepicker" id="dateInput" data-date-format="dd/mm/yyyy"><span class="input-group-addon"><i class="glyphicon glyphicon-th"></i></span>
        </div>
        <div class="form-group">
          <label for="attachmentInputFile">Attachment</label>
          <input type="file" class="form-control-file" id="attachmentInputFile" aria-describedby="fileHelp">
          <small id="fileHelp" class="form-text text-muted">Add required receipts.</small>
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
      </fieldset>
    </form>
  </div>

  <div class="col-xl-8 container-fluid p-3">
    <h2>My Expenses</h2>
    {% if expenses is empty %}
    <p>You have no expenses yet. Time to make some ;)</p>
    {% else %}
    <table class="table">
    <thead>
      <tr>
        <th scope="col">Date</th>
        <th scope="col">Name</th>
        <th scope="col">Description</th>
        <th scope="col">Amount</th>
        <th scope="col">Approved</th>
        <th scope="col">Reimbursed</th>
      </tr>
    </thead>
    <tbody>
      {% for expense in expenses %}
      <tr>
        <th scope="row">{{ expense.date|date("Y-m-d")}}</th>
        <td>{{expense.name}}</td>
        <td>{{expense.description}}</td>
        <td>{{expense.amount}}</td>
        {% if expense.approved is empty %}
        <td>pending</td>
        {% else %}
        <td>{{expense.approved}}</td>
        {% endif %}
        {% if expense.reimbursed == 0 %}
        <td>Not Yet</td>
        {% else %}
        <td>Paid</td>
        {% endif %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
    {% endif %}
  </div>
</div>

{% endblock %}